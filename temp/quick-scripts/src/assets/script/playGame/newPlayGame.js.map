{"version":3,"sources":["assets/script/playGame/newPlayGame.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ItemPrefab from \"../ItemPrefab\";\nimport Item from \"./Item\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class NewClass extends cc.Component {\n    @property(cc.Node)\n    iconPrefab: cc.Node = null;\n\n    @property(cc.Prefab)\n    item: cc.Prefab = null;\n\n    @property(cc.Node)\n    layer: cc.Node = null;\n\n    @property(cc.Node)\n    layer1: cc.Node = null;\n\n    @property(cc.Node)\n    lbWin: cc.Node = null;\n\n    mapData: number[][] = [];\n    arrayItem: number[] = [\n        2, 2, -1, -1,\n        2, 2, -1, -1,\n        1, 1, -3, -1,\n        3, 3, -3, -2,\n        1, 1, -1, -1,\n        0, 3, -3, -2,\n\n    ];\n\n    layerOut: cc.Node = null;\n    indexArrayOut: number = -1;\n    level: number = 1;\n    gameOver: number = 0;\n    aarr: number[] = []\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        this.buildMap();\n    }\n\n    start() {\n    }\n    // update (dt) {}\n    buildMap() {\n        for (let i = 0; i < this.arrayItem.length; i++) {\n            if (this.arrayItem[i] > 0) {\n                this.aarr.push(this.arrayItem[i])\n            }\n        }\n\n        this.mapData = this.sliceArr(this.arrayItem, 4);\n        console.log(this.mapData);\n        for (let i = 0; i < this.mapData.length; i++) {\n            for (let j = 0; j < 4; j++) {\n                if (this.mapData[i][j] < 0) {\n                    this.mapData[i] = this.mapData[i].slice(0, j)\n                }\n            }\n            let item = cc.instantiate(this.item);\n            item.setParent(this.layer);\n            if (i < 4) {\n                item.setPosition(this.layer1.children[i].getPosition());\n            } else {\n                // item.y = -100;\n                item.setPosition(this.layer1.children[i].getPosition());\n            }\n            console.log(\"-==-=positons=-==\", item.y)\n            item.active = true;\n            item.name = (\"item\" + i)\n            this.createIcon(this.mapData[i], item);\n            let scriptItem = item.getComponent(Item);\n            scriptItem.setUp(i, this.mapData[i]);\n            item.on(\"Click_binh\", () => {\n                console.log(\"this.layer.children[scriptItem.idItem]\", this.layer.children[scriptItem.idItem])\n                this.onClickItem(scriptItem.idItem, this.layer.children[scriptItem.idItem])\n            }, this)\n        }\n    }\n    onClickItem(idItem, layerItemClick) {\n        console.log(\"onClickItem=--=-=-=\");\n        if (this.indexArrayOut == -1) {\n            //chon diem bat dau\n            // arrItemClick cua item bay len\n            this.layerOut = layerItemClick;\n            if (layerItemClick.childrenCount > 0) {\n                console.log(\"click chinh no ==> bay bong len \", layerItemClick.childrenCount);\n                this.moveBall(this.mapData[idItem], layerItemClick, 1, layerItemClick);\n                this.indexArrayOut = idItem;\n            }\n        } else {\n            if (this.indexArrayOut == idItem) {\n                // chon dich den la diem bat dau\n                console.log(\"click chinh no lan nua ==> tha bong xuong\");\n                this.moveBall(this.mapData[idItem], layerItemClick, 0, layerItemClick);\n\n            } else {\n                // chon dich den la diem khac\n                console.log(\"dich den arrItemClick: \", this.mapData[idItem]);\n                console.log(\"=-=-=-=-quang00=-=-===-: \", this.layerOut);\n                console.log(\"=-=-=-=-quang00=-=-===-: \", this.indexArrayOut);\n                this.mapData[this.indexArrayOut] = this.onHanlderClickLayer(this.mapData[this.indexArrayOut], this.mapData[idItem], this.layerOut, layerItemClick);\n            }\n            this.indexArrayOut = -1;\n            this.layerOut = null;\n        }\n    }\n    onHanlderClickLayer(arrItem = [], arrItemClick = [], layerOut, layerIn) {\n        // arrItemClick cua dich den\n        console.log(\"arrItem ban dau : \", arrItem);\n        console.log(\"arrItemClick ban dau : \", arrItemClick);\n\n        // lay phan tu cuoi cung\n        let arrMove = [arrItem[arrItem.length - 1]];\n        // lay nhung phan tu giong phan tu cuoi\n        if (arrItem.length > 1) {\n            for (let i = arrItem.length - 2; i > -1; i--) {\n                if (arrItem[i] == arrMove[0]) {\n                    arrMove.push(arrItem[i]);\n                } else {\n                    break;\n                }\n            }\n        }\n        console.log(\"arrMove : \", arrMove);\n        let arrIndexRemove = [];\n        for (let i = arrItem.length - 1; i > arrItem.length - 1 - arrMove.length; i--) {\n            arrIndexRemove.push(i);\n        }\n        // console.log(\"array index remove=--=-=-=-==-=-: \", arrIndexRemove);\n        // check max item\n        let maxItem = arrItemClick.length + arrMove.length;\n        if (maxItem > 4) {\n            this.moveBall(arrItem, layerOut, 0, layerIn);\n            console.log(\"maxItem ==> khong di chuyen duoc\", arrItemClick, arrItem)\n            return arrItem;\n        } else {\n            // xu ly di chuyen\n            // check cung mau cho di chuyen\n            if (arrItemClick[arrItemClick.length - 1] == arrMove[arrMove.length - 1] || arrItemClick.length < 1) {\n                for (let i = 0; i < arrMove.length; i++) {\n                    arrItemClick.push(arrMove[i]);\n                }\n                this.moveBall(arrItem, layerOut, 2, layerIn, arrItemClick);\n                let index = arrItem.length - arrMove.length;\n                arrItem = arrItem.slice(0, index);\n                console.log(\"ban dau sau khi slice : \", arrItem);\n                console.log(\"dich den sau khi di chuyen: \", arrItemClick);\n                let aarr = []\n                for (let i = 0; i < arrItemClick.length; i++) {\n                    if (arrItemClick[0] == arrItemClick[i]) {\n                        aarr.push(arrItemClick[i])\n                    }\n                }\n                if (aarr.length == 4) {\n                    this.gameOver++;\n                    console.log(\"this.gameOverthis.gameOverthis.gameOverthis.gameOver: \", this.gameOver, arrItem.length);\n                }\n                if (arrItem.length == 0) {\n                    this.gameOver++;\n                    console.log(\"this.gameOverthis.gameOverthis.gameOverthis.gameOver: \", this.gameOver);\n                }\n\n                return arrItem;\n            } else {\n                this.moveBall(arrItem, layerOut, 0, layerIn);\n                console.log(\"arrItem\", arrItem, \"layerOut\", layerOut, \"layerIn\", layerIn);\n                console.log(\"chua di chuyen duoc\");\n                return arrItem;\n            }\n        }\n\n    }\n    moveBall(arrItem, layerOut: cc.Node, idx, layerIn, arrItemClick: any = []) {\n        let arrMove = [arrItem[arrItem.length - 1]];\n        if (arrItem.length > 1) {\n            for (let i = arrItem.length - 2; i > -1; i--) {\n                if (arrItem[i] == arrMove[0]) {\n                    arrMove.push(arrItem[i]);\n                } else {\n                    break;\n                }\n            }\n        }\n\n        let arrIndexRemove = [];\n        for (let i = arrItem.length - 1; i > arrItem.length - 1 - arrMove.length; i--) {\n            arrIndexRemove.push(i);\n        }\n        console.log(\"arrIndexRemove=-=-=-=-\", arrIndexRemove)\n        console.log(\"layout=-=-=-=-\", layerOut)\n        for (let i = 0; i < arrIndexRemove.length; i++) {\n            let icon = layerOut.children[arrIndexRemove[i]];\n            console.log(\"quang layerOut.children -=-=-=-=-=-\", layerOut.children)\n            console.log(\"quang arrIndexRemove -=-=-=-=-=-\", arrIndexRemove, arrIndexRemove[i])\n\n            let p = new cc.Vec3(0, layerOut.height * layerOut.scaleY * 1.3 - i * 30)\n            if (idx == 1) {\n                // icon.stopAllActions()\n                cc.tween(icon)\n                    .to(0.2, { position: p })\n                    .start();\n            } else if (idx == 0) {\n                cc.tween(icon)\n                    .to(0.2, { y: arrIndexRemove[i] * 50 })\n                    .start();\n            } else if (idx == 2) {\n                // icon.stopAllActions()\n                layerIn.getComponent(cc.Button).interactable = false;\n                layerOut.getComponent(cc.Button).interactable = false;\n                let a = icon.parent.convertToWorldSpaceAR(icon.position);\n                let b = layerIn.convertToNodeSpaceAR(a);\n                icon.setParent(layerIn);\n                icon.setPosition(b);\n\n                cc.tween(icon)\n                    .to(0.2, { y: p.y })\n                    .to(0.2, { x: p.x })\n                    .to(0.2, { y: (layerIn.childrenCount - 1) * 50 })\n                    .call(() => {\n                        layerOut.removeChild(icon, true);\n                    })\n                    .call(() => {\n                        layerIn.getComponent(cc.Button).interactable = true;\n                        layerOut.getComponent(cc.Button).interactable = true;\n                        if (this.gameOver == this.mapData.length) {\n                            this.lbWin.active = true;\n                        }\n                    })\n                    .start();\n            }\n        }\n    }\n    createIcon(arr = [], layer) {\n        for (let i = 0; i < arr.length; i++) {\n            let pos = layer.position;\n            let icon = cc.instantiate(this.iconPrefab);\n            console.log(\"=-=-==\", arr[i])\n            icon.getComponent(ItemPrefab).setIndex(arr[i]);\n            icon.setParent(layer);\n            icon.x = 0;\n            icon.y = i * 50;\n            console.log(\"==-=-=-pos.y\", pos.y + i * 50)\n        }\n    }\n    sliceArr(arr: number[], count: number): number[][] {\n        let array: number[][] = [];\n        for (let j = 0; j < arr.length; j += count) {\n            let array1 = arr.slice(j, j + count)\n            array.push(array1)\n        }\n        return array;\n    }\n    resetGame() {\n        while (this.layer.childrenCount > 0) {\n            this.layer.removeAllChildren();\n        }\n        while (this.lbWin.active) {\n            this.lbWin.active = false;\n        }\n        this.buildMap();\n    }\n    netxGame() {\n        this.level++;\n        if (this.level == 2) {\n            this.arrayItem = [0, 0, 0, 0, 1, 1, 1, 1]\n        } else if (this.level == 3) {\n            this.arrayItem = [0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2]\n        } else if (this.level == 4) {\n            this.arrayItem = [0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3]\n        }\n        console.log(\"level\", this.level);\n        this.resetGame();\n    }\n}\n"]}